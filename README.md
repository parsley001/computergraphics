# p5.js Assignment Viewer

コンピューターグラフィックス課題表示システム - p5.jsを使用した課題ファイルを動的に読み込んで表示するWebアプリケーション

## 概要

このプロジェクトは、`src/assignments/` フォルダ内のp5.jsファイルを自動的に検出し、ブラウザ上で選択・表示できるシステムです。課題ファイルを追加するだけで、自動的にドロップダウンメニューに表示され、リアルタイムで実行結果を確認できます。

## 主な機能

- 📁 **自動ファイル検出**: `src/assignments/` フォルダ内の.jsファイルを自動検出
- 🔄 **リアルタイム更新**: ファイルの追加・削除を即座に反映
- 📊 **自然順ソート**: ファイル名を数値順にソート（例: 2-1.js < 2-2.js < 10-1.js）
- 🎨 **p5.js統合**: p5.jsライブラリを使用したグラフィックス表示
- 🔗 **URL共有**: 選択したファイルをURLパラメータで共有可能
- ⚡ **高速切り替え**: ページリロードなしでファイル間を切り替え

## 必要な環境

- Node.js (v14以上推奨)
- npm または yarn

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

開発サーバーが起動し、ブラウザで `http://localhost:3000` が自動的に開きます。

### 3. 本番ビルド（オプション）

```bash
npm run build
```

ビルドされたファイルは `dist/` フォルダに出力されます。

## 使い方

### 基本的な使用方法

1. **開発サーバーを起動**: `npm run dev`
2. **ブラウザでアクセス**: `http://localhost:3000`
3. **ファイルを選択**: ドロップダウンメニューから実行したいファイルを選択
4. **結果を確認**: 選択したp5.jsファイルが即座に実行され、結果が表示されます

### 課題ファイルの追加

1. `src/assignments/` フォルダに新しい.jsファイルを作成
2. p5.jsの標準的な構文で記述（setup(), draw()関数など）
3. ファイルを保存すると自動的にドロップダウンメニューに追加されます

#### 課題ファイルの例

```javascript
// src/assignments/2-1.js
function setup() {
  createCanvas(400, 400);
}

function draw() {
  background(220);
  ellipse(mouseX, mouseY, 50, 50);
}
```

### ファイル命名規則

ファイル名は以下の形式を推奨します：

- `{章番号}-{節番号}.js` （例: `2-1.js`, `2-2.js`, `10-1.js`）
- この形式により、自動的に数値順でソートされます

### URL共有

特定のファイルを直接開くには、URLパラメータを使用します：

```
http://localhost:3000/?file=2-1.js
```

## プロジェクト構造

```
computergraphics/
├── src/
│   ├── app.js              # メインアプリケーションファイル
│   ├── utils.js            # ユーティリティ関数
│   └── assignments/        # 課題ファイル格納フォルダ
│       ├── sample1.js      # サンプル課題1
│       ├── sample2.js      # サンプル課題2
│       └── sample3.js      # サンプル課題3
├── index.html              # メインHTMLファイル
├── vite.config.js          # Vite設定ファイル
├── package.json            # プロジェクト設定
└── README.md               # このファイル
```

## 技術仕様

### 使用技術

- **p5.js**: グラフィックス描画ライブラリ
- **Vite**: 高速な開発サーバー・ビルドツール
- **Vanilla JavaScript**: フレームワークを使わないピュアなJavaScript

### API エンドポイント

開発サーバーは以下のAPIエンドポイントを提供します：

- `GET /api/assignments`: assignmentsフォルダ内のファイル一覧を取得

### 主要なクラス・モジュール

- **AssignmentViewer**: メインアプリケーションクラス
- **FileListManager**: ファイルリスト管理
- **ScriptLoader**: 動的スクリプト読み込み
- **ContentCleaner**: コンテンツクリーンアップ
- **URLUtils**: URL操作ユーティリティ

## トラブルシューティング

### よくある問題

#### 1. ファイルが表示されない

- 開発サーバーが起動しているか確認してください
- ファイル名が `.js` で終わっているか確認してください
- ブラウザのコンソールでエラーメッセージを確認してください

#### 2. p5.jsが動作しない

- `setup()` と `draw()` 関数が正しく定義されているか確認してください
- JavaScriptの構文エラーがないか確認してください

#### 3. ポートが使用中

開発サーバーが自動的に別のポート（3001など）を使用します。ターミナルに表示されるURLを確認してください。

### デバッグ方法

1. **ブラウザの開発者ツール**: F12キーでコンソールを開き、エラーメッセージを確認
2. **ターミナル**: 開発サーバーのログを確認
3. **ファイル確認**: `src/assignments/` フォルダ内のファイル名と内容を確認

## 開発者向け情報

### カスタマイズ

#### ポート番号の変更

`vite.config.js` の `server.port` を変更してください：

```javascript
export default defineConfig({
  server: {
    port: 4000, // お好みのポート番号
    open: true
  },
  // ...
});
```

#### 新しいファイル形式のサポート

`vite.config.js` の `assignmentsPlugin` 関数内で、ファイルフィルターを変更できます。

### 貢献

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## ライセンス

ISC License

## 作者

コンピューターグラフィックス課題システム

---

**注意**: このシステムは教育目的で作成されています。商用利用の際は適切なライセンス確認を行ってください。
